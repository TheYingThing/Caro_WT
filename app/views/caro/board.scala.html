@import views.html.caro.partials.quickrules
@(controller: HomeController)
<div class="content-body">
    <div class="row">
        <div class="player col-lg-3 col-6">
            @if(controller.controller.getMoves % 2 == 0) {
                <h3 class="highlight">@controller.controller.getPlayerOneName</h3>
            }else{
                <h3>@controller.controller.getPlayerOneName</h3>
            }
            <nav class="top-padding">
                <div class="nav nav-pills nav-justified" id="nav-tab" role="tablist">
                    <button class="nav-link grey-link active" id="nav-tiles-tab-p1" data-bs-toggle="tab" data-bs-target="#nav-tiles-p1" type="button" role="tab" aria-controls="nav-tiles-p1" aria-selected="true">Tiles</button>
                    <button class="nav-link grey-link" id="nav-scoring-tab-p1" data-bs-toggle="tab" data-bs-target="#nav-scoring-p1" type="button" role="tab" aria-controls="nav-scoring-p1" aria-selected="false">Scoring rules</button>
                </div>
            </nav>
            <div class="tab-content" id="nav-tabContent-p1">
                <div class="tab-pane fade show active top-padding" id="nav-tiles-p1" role="tabpanel" aria-labelledby="nav-tiles-tab-p1">
                    <h4>@controller.controller.getBoard.getPlayerOne.getPoints</h4>
                    <div class="tile-padding">
                        @for(tiles <- 0 until controller.controller.getBoard.getPlayerOne.getTiles("red")) {
                        <span class="tile-padding">
                            <img src="@routes.Assets.versioned("images/redButton.png")" class="player-tile" id="redtile@tiles" alt="red tile" draggable="true">
                         </span>
                        }
                    </div>
                    <div class="tile-padding">
                        @for(tiles <- 0 until controller.controller.getBoard.getPlayerOne.getTiles("black")) {
                        <span class="tile-padding">
                            <img src="@routes.Assets.versioned("images/blackButton.png")" class="player-tile" id="blacktile@tiles" alt="black tile" draggable="true">
                        </span>
                        }
                    </div>
                    <div class="tile-padding">
                        @for(tiles <- 0 until controller.controller.getBoard.getPlayerOne.getTiles("grey")) {
                        <span class="tile-padding">
                            <img src="@routes.Assets.versioned("images/greyButton.png")" class="player-tile" id="greytile@tiles" alt="grey tile" draggable="true">
                        </span>
                        }
                    </div>
                    <div class="tile-padding">
                        @for(tiles <- 0 until controller.controller.getBoard.getPlayerOne.getTiles("white")) {
                        <span class="tile-padding">
                            <img src="@routes.Assets.versioned("images/whiteButton.png")" class="player-tile" id="whitetile@tiles" alt="white tile" draggable="true">
                        </span>
                        }
                    </div>
                </div>
                @quickrules("p1")
            </div>
        </div>
        <div class="col-lg-6 col-12 order-first order-lg-0">
            <div class="btn-group" role="group" >
                <a class="btn btn-secondary grey-button" type="button" href="http://localhost:9000/save">Save</a>
                <a class="btn btn-secondary grey-button" type="button" href="http://localhost:9000/undo">Undo</a>
                <a class="btn btn-secondary grey-button" type="button" href="http://localhost:9000/redo">Redo</a>
                <a class="btn btn-secondary grey-button" type="button" href="http://localhost:9000/score">End Game</a>
            </div>
            <div class="col-board" id="board-grid">
            @for(row <- 3 to 15) {
                <div class="btn-group" id="board-grid-row">
                @for(col <- 3 to 15) {
                    @if(controller.controller.getCellColor(row, col) == "none") {
                        @if(controller.controller.getBoard.allRules(row, col, "red") || controller.controller.getBoard.allRules(row, col, "black") ||
                                controller.controller.getBoard.allRules(row, col, "grey") || controller.controller.getBoard.allRules(row, col, "white")) {
                            <div class="board-tile-padding" id="board-tiles">
                                <span type="button" class="btn btn-secondary dropdown-toggle opacity-allRules shadow-none empty-tile"  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="{@row}{@col}">
                                    <img class="tile-img" src="@routes.Assets.versioned("images/noTile.png")" alt="no tile">
                                </span>
                                <div class="dropdown-menu" data-row="@row" data-col="@col" id="tile">
                                        <span class="dropdown-item shadow-none " data-color="red" onclick="putTileOnly('red')">
                                            <img class="tile-img" src="@routes.Assets.versioned("images/redButton.png")" alt="red tile">
                                        </span>
                                        <span class="dropdown-item shadow-none" data-color="black" onclick="putTileOnly('black')">
                                            <img class="tile-img" src="@routes.Assets.versioned("images/blackButton.png")" alt="black tile">
                                        </span>
                                        <span class="dropdown-item shadow-none" data-color="grey" onclick="putTileOnly('grey')">
                                            <img class="tile-img" src="@routes.Assets.versioned("images/greyButton.png")" alt="grey tile">
                                        </span>
                                        <span class="dropdown-item shadow-none" data-color="white" onclick="putTileOnly('white')">
                                            <img class="tile-img" src="@routes.Assets.versioned("images/whiteButton.png")" alt="white tile">
                                        </span>
                                </div>
                            </div>
                        } else {
                            <div class="board-tile-padding">
                                <span type="button" class="btn btn-secondary dropdown-toggle opacity-noRules shadow-none empty-tile" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img class="tile-img" src="@routes.Assets.versioned("images/noTile.png")" alt="no tile">
                                </span>
                                <div class="dropdown-menu" data-row="@row" data-col="@col">
                                    <a class="dropdown-item shadow-none" data-color="red" href="http://localhost:9000/put/@{row-2}/@{col-2}red/">
                                        <span>
                                            <img class="tile-img" src="@routes.Assets.versioned("images/redButton.png")" alt="red tile">
                                        </span>
                                    </a>
                                    <a class="dropdown-item shadow-none" data-color="black" href="http://localhost:9000/put/@{row-2}/@{col-2}/black">
                                        <span>
                                            <img class="tile-img" src="@routes.Assets.versioned("images/blackButton.png")" alt="black tile">
                                        </span>
                                    </a>
                                    <a class="dropdown-item shadow-none" data-color="grey" href="http://localhost:9000/put/@{row-2}/@{col-2}/grey">
                                        <span>
                                            <img class="tile-img" src="@routes.Assets.versioned("images/greyButton.png")" alt="grey tile">
                                        </span>
                                    </a>
                                    <a class="dropdown-item shadow-none" data-color="white" href="http://localhost:9000/put/@{row-2}/@{col-2}/white">
                                        <span>
                                            <img class="tile-img" src="@routes.Assets.versioned("images/whiteButton.png")" alt="white tile">
                                        </span>
                                    </a>
                                </div>
                            </div>
                        }
                    } else if(controller.controller.getCellColor(row, col) == "red") {
                    <span class="board-tile-padding">
                        <img class="tile-img" src="@routes.Assets.versioned("images/redButton.png")" alt="red tile">
                    </span>
                    } else if(controller.controller.getCellColor(row, col) == "black") {
                    <span class="board-tile-padding">
                        <img class="tile-img" src="@routes.Assets.versioned("images/blackButton.png")" alt="black tile">
                    </span>
                    } else if(controller.controller.getCellColor(row, col) == "grey") {
                    <span class="board-tile-padding">
                        <img class="tile-img" src="@routes.Assets.versioned("images/greyButton.png")" alt="grey tile">
                    </span>
                    } else if(controller.controller.getCellColor(row, col) == "white") {
                    <span class="board-tile-padding">
                        <img class="tile-img" src="@routes.Assets.versioned("images/whiteButton.png")" alt="white tile">
                    </span>
                    }
                }
                </div>
            }
            </div>
        </div>
        <div class="player col-lg-3 col-6">
            @if(controller.controller.getMoves % 2 != 0) {
                <h3 class="highlight">@controller.controller.getPlayerTwoName</h3>
            }else{
                <h3>@controller.controller.getPlayerTwoName</h3>
            }
            <nav class="top-padding">
                <div class="nav nav-pills nav-justified" id="nav-tab-p2" role="tablist">
                    <button class="nav-link grey-link active" id="nav-tiles-tab-p2" data-bs-toggle="tab" data-bs-target="#nav-tiles-p2" type="button" role="tab" aria-controls="nav-tiles-p2" aria-selected="true">Tiles</button>
                    <button class="nav-link grey-link" id="nav-scoring-tab-p2" data-bs-toggle="tab" data-bs-target="#nav-scoring-p2" type="button" role="tab" aria-controls="nav-scoring-p2" aria-selected="false">Scoring rules</button>
                </div>
            </nav>
            <div class="tab-content" id="nav-tabContent-p2">
                <div class="tab-pane fade show active top-padding" id="nav-tiles-p2" role="tabpanel" aria-labelledby="nav-tiles-tab-p2">
                    <h4>@controller.controller.getBoard.getPlayerTwo.getPoints</h4>
                    <div class="tile-padding">
                        @for(tiles <- 0 until controller.controller.getBoard.getPlayerTwo.getTiles("red")) {
                        <span class="tile-padding tile-img">
                            <img src="@routes.Assets.versioned("images/redButton.png")" class="player-tile" id="redtile@tiles" alt="red tile" draggable="true">
                        </span>
                        }
                    </div>
                    <div class="tile-padding">
                        @for(tiles <- 0 until controller.controller.getBoard.getPlayerTwo.getTiles("black")) {
                        <span class="tile-padding tile-img">
                            <img src="@routes.Assets.versioned("images/blackButton.png")" class="player-tile" id="blacktile@tiles" alt="black tile" draggable="true">
                        </span>
                        }
                    </div>
                    <div class="tile-padding"class="tile-padding">
                        @for(tiles <- 0 until controller.controller.getBoard.getPlayerTwo.getTiles("grey")) {
                        <span class="tile-padding tile-img">
                            <img src="@routes.Assets.versioned("images/greyButton.png")" class="player-tile" id="greytile@tiles"alt="grey tile" draggable="true">
                        </span>
                        }
                    </div>
                    <div class="tile-padding">
                        @for(tiles <- 0 until controller.controller.getBoard.getPlayerTwo.getTiles("white")) {
                        <span class="tile-padding tile-img">
                            <img src="@routes.Assets.versioned("images/whiteButton.png")" class="player-tile" id="whitetile@tiles" alt="white tile" draggable="true">
                        </span>
                        }
                    </div>
                </div>
                @quickrules("p2")
            </div>

        </div>
    </div>
    <div class="row">
        @if(controller.controller.getBoardStatus != "") {
        <div class="alert alert-dark alert-dismissible" role="alert">
            @controller.controller.getBoardStatus
            <a style="text-decoration:none" type="button" class="close" data-bs-dismiss="alert" aria-label="Close">
                <span class="alert-icon" aria-hidden="true">&times;</span></span>
            </a>
        </div>
        }
    </div>
</div>
